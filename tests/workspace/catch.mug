import io
import "parse.mug"

[code:
"
#include<stdio.h> 

const char* c_$readln(const char* prompt) { 
	const char* str = malloc(100);
	printf(\"%s\", prompt);
	scanf(\"%[^\'\\n\']s\", str); 
	return str;
}  
", extern: "c_$readln"]
func readln(prompt: str): str

func main(): i32 {
  println("This program is returning to eax the input as int")
  
  return readln("input: ").parse_i32() catch e {
		if e == ParseErr.DoublePrefix { println("why a double prefix?") }
		else { println("mhh, bad number") }

		-1
	}
}
